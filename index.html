#!/bin/bash

CLOUDGENE_VERSION=2.4.3
if [ -n "$1" ]; then
  CLOUDGENE_VERSION="$1"
fi

set -e

CLOUDGENE_URL=https://github.com/genepi/cloudgene/releases/download
CLOUDGENE_INSTALLER_URL=${CLOUDGENE_URL}/v${CLOUDGENE_VERSION}/cloudgene-installer.sh

echo "Installing Cloudgene ${CLOUDGENE_VERSION}..."

echo "Downloading Cloudgene ${CLOUDGENE_INSTALLER_URL}..."
curl -fL ${CLOUDGENE_INSTALLER_URL} -o cloudgene-installer.sh

# execute installer
chmod +x ./cloudgene-installer.sh
./cloudgene-installer.sh

# change mod for executables
chmod +x ./cloudgene
chmod +x ./cloudgene-daemon

# remove installer
rm ./cloudgene-installer.sh

echo ""
echo "Cloudgene ${CLOUDGENE_VERSION} installation completed. Have fun!"
